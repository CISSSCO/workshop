<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Parallel Programming Using OpenMP</title>
<meta name="author" content="Abhishek Raj"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/solarized.css" id="theme"/>

<link rel="stylesheet" href="~/.config/doom/org-reveal/scroll.css"/>

<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/npm/reveal.js/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Parallel Programming Using OpenMP</h1><p class="subtitle"></p>
<h2 class="author">Abhishek Raj</h2><h2 class="date">2025-11-08</h2><p class="date">Created: 2025-11-12 Wed 22:22</p>
</section>
<section id="sec-table-of-contents"><div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#/slide-org44fad3d">1. GitHub</a></li>
<li><a href="#/slide-org09282f3">2. Setting up environment</a>
<ul>
<li><a href="#/slide-org62ba02f">2.1. compile</a></li>
<li><a href="#/slide-org10b83be">2.2. run</a></li>
</ul>
</li>
<li><a href="#/slide-org8f92db5">3. Part 1</a></li>
<li><a href="#/slide-org591cdbc">4. Agenda</a></li>
<li><a href="#/slide-org9eab027">5. Serial Computing</a></li>
<li><a href="#/slide-org4f1e380">6. Parallel Computing</a></li>
<li><a href="#/slide-orgaf6cd3a">7. Why Parallel Computing</a></li>
<li><a href="#/slide-orga8fd181">8. Applications of Parallel Computing</a></li>
<li><a href="#/slide-org92f200d">9. Serial Computing vs Parallel Computing&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></a>
<ul>
<li><a href="#/slide-org7db4988">9.1. Serial Computing</a></li>
<li><a href="#/slide-org1ecffe5">9.2. Parallel Computing</a></li>
</ul>
</li>
<li><a href="#/slide-org673bb89">10. Concurrency vs Parallelism&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></a>
<ul>
<li><a href="#/slide-org872c7a2">10.1. Concurrency</a></li>
<li><a href="#/slide-orgc96a3c3">10.2. Parallelism</a></li>
</ul>
</li>
<li><a href="#/slide-org53517b8">11. Types of Parallelism</a>
<ul>
<li><a href="#/slide-org9b3fa86">11.1. Task Parallelism</a></li>
<li><a href="#/slide-orgd0f53ef">11.2. Data Parallelism</a></li>
</ul>
</li>
<li><a href="#/slide-orga37e909">12. General Parallel Computing Terminology</a></li>
<li><a href="#/slide-org1f1256e">13. Shared Memory&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></a></li>
<li><a href="#/slide-orga005eb0">14. Distributed Memory&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></a></li>
<li><a href="#/slide-org2faa1d5">15. Terminology</a></li>
<li><a href="#/slide-orgfdeaf5f">16. What is OpenMP?</a></li>
<li><a href="#/slide-orgf59b50c">17. Why OpenMP?</a></li>
<li><a href="#/slide-org382dff7">18. Hello World in C</a></li>
<li><a href="#/slide-org3f3ecb4">19. Compile and Run C</a></li>
<li><a href="#/slide-org9258351">20. Hello World in OpenMP</a></li>
<li><a href="#/slide-orgcae06f1">21. Compile and Run OpenMP</a></li>
<li><a href="#/slide-org452dcfd">22. Part 2</a></li>
<li><a href="#/slide-orgcb42f2e">23. Agenda</a></li>
<li><a href="#/slide-orga52644a">24. Script for Running OpenMP Jobs</a></li>
<li><a href="#/slide-orgbb67608">25. Using script.sh script</a></li>
<li><a href="#/slide-orgcd36abc">26. Fork-Join Model&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></a>
<ul>
<li><a href="#/slide-org80106da">26.1. Parallel Region</a></li>
</ul>
</li>
<li><a href="#/slide-org9647a08">27. OpenMP Constructs and Clause</a></li>
<li><a href="#/slide-orgcaf8be5">28. OpenMP Constructs</a>
<ul>
<li><a href="#/slide-org61db516">28.1. Common constructs:</a></li>
</ul>
</li>
<li><a href="#/slide-org29c44ce">29. OpenMP Clause</a>
<ul>
<li><a href="#/slide-org680bb7b">29.1. Common clauses:</a></li>
</ul>
</li>
<li><a href="#/slide-org8e6e358">30. Assigning Number of Threads</a>
<ul>
<li><a href="#/slide-orge9c5bcd">30.1. Using Environment Variables</a></li>
<li><a href="#/slide-org57541f9">30.2. Using OpenMP Clause</a></li>
<li><a href="#/slide-org399d4fe">30.3. Using Runtime Routine</a></li>
</ul>
</li>
<li><a href="#/slide-orgcb5d993">31. Assigning Number of Threads — Order of Precedence</a></li>
<li><a href="#/slide-org0ac78f9">32. Assigning Number of Threads (Example)</a></li>
<li><a href="#/slide-org5e3ea6d">33. Runtime Library Routines</a></li>
<li><a href="#/slide-orgaf16f78">34. Printing thread id of each thread (Example)</a></li>
<li><a href="#/slide-orge57e71b">35. Part 3</a></li>
<li><a href="#/slide-orgc909d83">36. Agenda</a></li>
<li><a href="#/slide-org01221ee">37. OpenMP Memory Model</a></li>
<li><a href="#/slide-orged8b714">38. Data Scoping Clauses</a></li>
<li><a href="#/slide-orgfe3e1ef">39. Printing thread id of each thread (Example)</a></li>
<li><a href="#/slide-orga511fce">40. Private</a></li>
<li><a href="#/slide-org4730b68">41. Private Example</a></li>
<li><a href="#/slide-orge33b493">42. Shared</a></li>
<li><a href="#/slide-org26f6052">43. Shared Example</a></li>
<li><a href="#/slide-org90a77d7">44. Firstprivate</a></li>
<li><a href="#/slide-org16b521c">45. Firstprivate Example</a></li>
<li><a href="#/slide-orgdf019bd">46. Benefits of Firstprivate Clause</a></li>
<li><a href="#/slide-orgb9156a6">47. Default</a></li>
<li><a href="#/slide-org0a49e0d">48. Default Example</a></li>
<li><a href="#/slide-org14c0c87">49. Part 4</a></li>
<li><a href="#/slide-orgd150560">50. Agenda</a></li>
<li><a href="#/slide-orgdb903f5">51. Work-sharing Constructs</a>
<ul>
<li><a href="#/slide-org2354a9c">51.1. They are used to divide the work of:</a></li>
<li><a href="#/slide-orgaf3c0c8">51.2. Commonly used:</a></li>
</ul>
</li>
<li><a href="#/slide-org97f2ea8">52. For Construct</a></li>
<li><a href="#/slide-org9727656">53. Lastprivate</a>
<ul>
<li><a href="#/slide-org50687b3">53.1. Similar to private:</a></li>
<li><a href="#/slide-org3ceaaf7">53.2. Syntax:</a></li>
</ul>
</li>
<li><a href="#/slide-org084dedb">54. Lastprivate Example</a></li>
<li><a href="#/slide-org95818cd">55. Creating Data Parallelly</a></li>
<li><a href="#/slide-orgc16cfbf">56. Conditional Compilation</a></li>
<li><a href="#/slide-org7040b30">57. Conditional Compilation Example</a></li>
<li><a href="#/slide-org50a879b">58. Part 5</a></li>
<li><a href="#/slide-orga7e2c91">59. Agenda</a></li>
<li><a href="#/slide-org0c61624">60. OpenMP Scheduling</a>
<ul>
<li><a href="#/slide-orgd659732">60.1. Goal:</a></li>
<li><a href="#/slide-orgab28dfc">60.2. Types:</a></li>
<li><a href="#/slide-org70961f2">60.3. Syntax:</a></li>
<li><a href="#/slide-orgcf6bdb8">60.4. Using environment variable:</a></li>
<li><a href="#/slide-org15e568a">60.5. Kind values:</a></li>
<li><a href="#/slide-org4b04797">60.6. Chunksize values:</a></li>
</ul>
</li>
<li><a href="#/slide-org619c24d">61. Static Scheduling</a>
<ul>
<li><a href="#/slide-org540a82b">61.1. Syntax:</a></li>
</ul>
</li>
<li><a href="#/slide-orgd7eba7c">62. Dynamic Scheduling</a>
<ul>
<li><a href="#/slide-orgd4d4e29">62.1. Syntax:</a></li>
</ul>
</li>
<li><a href="#/slide-orgb7722b2">63. Guided Scheduling</a>
<ul>
<li><a href="#/slide-org310fd29">63.1. Syntax:</a></li>
</ul>
</li>
<li><a href="#/slide-org837a801">64. Runtime Scheduling</a></li>
<li><a href="#/slide-org67715a9">65. Part 6</a></li>
<li><a href="#/slide-org26afae9">66. Agenda</a></li>
<li><a href="#/slide-orgc19d0e6">67. Runtime Routines for Scheduling</a>
<ul>
<li><a href="#/slide-org44de32e">67.1. Example:</a></li>
<li><a href="#/slide-orgcd4f9f7">67.2. Other types:</a></li>
</ul>
</li>
<li><a href="#/slide-org8f54597">68. OpenMP Barrier</a></li>
<li><a href="#/slide-org5c02870">69. OpenMP Single</a></li>
<li><a href="#/slide-org16694dd">70. OpenMP Master</a></li>
<li><a href="#/slide-orgf3ccf6e">71. OpenMP Critical</a></li>
<li><a href="#/slide-orga7889d5">72. Part 7</a></li>
<li><a href="#/slide-orgfe02cd2">73. Agenda</a></li>
<li><a href="#/slide-orgea37ecf">74. Synchronization</a>
<ul>
<li><a href="#/slide-orgc31212c">74.1. Common synchronization constructs:</a></li>
</ul>
</li>
<li><a href="#/slide-org414155f">75. OpenMP Critical (again)</a></li>
<li><a href="#/slide-orgebea727">76. Reduction</a></li>
<li><a href="#/slide-org116ad0f">77. Measuring Time</a></li>
<li><a href="#/slide-org0016e89">78. Part 8</a></li>
<li><a href="#/slide-org36b6591">79. Agenda</a></li>
<li><a href="#/slide-org8e87424">80. Atomic</a></li>
<li><a href="#/slide-orgb614b12">81. Problem</a></li>
<li><a href="#/slide-org9a89f05">82. Assignment</a></li>
<li><a href="#/slide-org3b17ca2">83. Part 9</a></li>
<li><a href="#/slide-org31832e4">84. Agenda</a></li>
<li><a href="#/slide-org0d32a5b">85. Sections</a></li>
<li><a href="#/slide-orgb1f2c2e">86. Nowait</a></li>
<li><a href="#/slide-org3a8d568">87. Assignment</a></li>
</ul>
</div>
</div>
</section>
<section>
<section id="slide-org44fad3d">
<h2 id="org44fad3d"><span class="section-number-2">1.</span> <a href="https://github.com/CISSSCO/workshop.git">GitHub</a></h2>
</section>
</section>
<section>
<section id="slide-org09282f3">
<h2 id="org09282f3"><span class="section-number-2">2.</span> Setting up environment</h2>
<div class="outline-text-2" id="text-2">
</div>
</section>
<section id="slide-org62ba02f">
<h3 id="org62ba02f"><span class="section-number-3">2.1.</span> compile</h3>
<div class="org-src-container">

<pre  class="src src-bash"   ><code trim><span style="color: #c678dd;">source</span> /scratch/$<span style="color: #dcaeea;">USER</span>/spack/share/spack/setup-env.sh
spack load gcc/6qthuq2
<span style="color: #c678dd;">export</span> <span style="color: #dcaeea;">PATH</span>=<span style="color: #98be65;">"/home/abhishekraj.cdac/.local/gitpush:</span><span style="color: #a9a1e1;">$</span><span style="color: #dcaeea;">PATH</span><span style="color: #98be65;">"</span>
</code></pre>
</div>
</section>
<section id="slide-org10b83be">
<h3 id="org10b83be"><span class="section-number-3">2.2.</span> run</h3>
<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>
<span style="color: #5B6268;">#</span><span style="color: #5B6268;">!/bin/bash
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH -N 1                                    # Nodes = 1
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --ntasks-per-node=40                    # Tasks on each node = 40 
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --job-name=omp                          # Specify job name
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --output=%J.out                         # Name of your output file (%J is replaced with job_id)
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --error=%J.err                          # Name of your error file
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --time=1-00:00:00                       # Specify time taken to run your script
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --partition=cpu                         # Specify partition (cpu, gpu, hm)
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --reservation=hpcws
</span>
<span style="color: #c678dd;">ulimit</span> -s unlimited

./$<span style="color: #dcaeea;">1</span>

</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org8f92db5">
<h2 id="org8f92db5"><span class="section-number-2">3.</span> Part 1</h2>

</section>
</section>
<section>
<section id="slide-org591cdbc">
<h2 id="org591cdbc"><span class="section-number-2">4.</span> Agenda</h2>
<ul>
<li>What is Parallel Programming?</li>
<li>Why Parallel Programming?</li>
<li>Concurrency vs Parallelism</li>
<li>Terminology</li>
<li>What is OpenMP?</li>
<li>Hello World in OpenMP.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org9eab027">
<h2 id="org9eab027"><span class="section-number-2">5.</span> Serial Computing</h2>
<ul>
<li>Problem is broken into stream of instructions that are executed sequentially one after the other on a single processor.</li>
<li>One instruction executes at a time.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org4f1e380">
<h2 id="org4f1e380"><span class="section-number-2">6.</span> Parallel Computing</h2>
<ul>
<li>Doing things simultaneously</li>
<li>Same thing or different thing</li>
<li>Solving one large problem</li>

<li>Here things refers to programs or tasks (parts of programs).</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgaf6cd3a">
<h2 id="orgaf6cd3a"><span class="section-number-2">7.</span> Why Parallel Computing</h2>
<ul>
<li>Handling complex tasks</li>
<li>Improved performance</li>
<li>Better resource utilization</li>
<li>Scalability</li>
<li>Save time</li>
<li>Save money</li>

</ul>
</section>
</section>
<section>
<section id="slide-orga8fd181">
<h2 id="orga8fd181"><span class="section-number-2">8.</span> Applications of Parallel Computing</h2>
<ul>
<li>Data mining</li>
<li>Real-time simulations</li>
<li>Scientific calculations</li>
<li>Graphical applications</li>
<li>AI and Machine Learning, etc.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org92f200d">
<h2 id="org92f200d"><span class="section-number-2">9.</span> Serial Computing vs Parallel Computing&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></h2>

<div id="orgd32c6ae" class="figure">
<p><img src="file:///home/abhi581b/org/.attach/ae/6f9ae3-a3d0-46ad-84c9-6b10fb553c54/_20251109_211039Parallel-vs-sequential-programming.png" alt="_20251109_211039Parallel-vs-sequential-programming.png" />
</p>
</div>
</section>
<section id="slide-org7db4988">
<h3 id="org7db4988"><span class="section-number-3">9.1.</span> Serial Computing</h3>
<ul>
<li>Problem is broken into stream of instructions executed one after the other by a single core.</li>

</ul>
</section>
<section id="slide-org1ecffe5">
<h3 id="org1ecffe5"><span class="section-number-3">9.2.</span> Parallel Computing</h3>
<ul>
<li>Problem is broken into parts that can be solved concurrently.</li>
<li>Each part is further broken into stream of instructions.</li>
<li>Instructions from different parts execute simultaneously on different processors.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org673bb89">
<h2 id="org673bb89"><span class="section-number-2">10.</span> Concurrency vs Parallelism&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></h2>

<div id="org5503cdc" class="figure">
<p><img src="file:///home/abhi581b/org/.attach/e0/fc86cd-4306-481c-b38d-7d2e0e080c1d/_20251109_2117341*cbFp5h440Mo0gOlY-A7Scg.jpeg" alt="_20251109_2117341*cbFp5h440Mo0gOlY-A7Scg.jpeg" />
</p>
</div>
</section>
<section id="slide-org872c7a2">
<h3 id="org872c7a2"><span class="section-number-3">10.1.</span> Concurrency</h3>
<p>
Making progress on more than one task - seemingly at the same time.
</p>
</section>
<section id="slide-orgc96a3c3">
<h3 id="orgc96a3c3"><span class="section-number-3">10.2.</span> Parallelism</h3>
<p>
Splitting a single task into subtasks which can be executed in parallel.
</p>
</section>
</section>
<section>
<section id="slide-org53517b8">
<h2 id="org53517b8"><span class="section-number-2">11.</span> Types of Parallelism</h2>
<div class="outline-text-2" id="text-11">
</div>
</section>
<section id="slide-org9b3fa86">
<h3 id="org9b3fa86"><span class="section-number-3">11.1.</span> Task Parallelism</h3>
<p>
Tasks are divided between number of processes/cores.
</p>
</section>
<section id="slide-orgd0f53ef">
<h3 id="orgd0f53ef"><span class="section-number-3">11.2.</span> Data Parallelism</h3>
<ul>
<li>Data is divided between number of processes/cores.</li>
<li>They all perform similar tasks.</li>

</ul>
</section>
</section>
<section>
<section id="slide-orga37e909">
<h2 id="orga37e909"><span class="section-number-2">12.</span> General Parallel Computing Terminology</h2>
<ul>
<li>Shared Memory</li>
<li>Distributed Memory</li>
<li>Node</li>
<li>Core</li>
<li>CPU</li>
<li>Process</li>
<li>Thread</li>

</ul>
</section>
</section>
<section>
<section id="slide-org1f1256e">
<h2 id="org1f1256e"><span class="section-number-2">13.</span> Shared Memory&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></h2>

<div id="org3107819" class="figure">
<p><img src="file:///home/abhi581b/org/.attach/88/be0043-790c-4093-bef0-d71d9a565734/_20251109_2105467tbYe.png" alt="_20251109_2105467tbYe.png" />
</p>
</div>

<ul>
<li>Memory is shared between multiple CPU/cores.</li>
<li>OpenMP is used.</li>

</ul>
</section>
</section>
<section>
<section id="slide-orga005eb0">
<h2 id="orga005eb0"><span class="section-number-2">14.</span> Distributed Memory&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></h2>

<div id="org3d38fa5" class="figure">
<p><img src="file:///home/abhi581b/org/.attach/5a/d40a64-45e0-4d6e-9bbd-6d809c7e0b24/_20251109_210837UzaWGc5.jpg" alt="_20251109_210837UzaWGc5.jpg" />
</p>
</div>

<ul>
<li>Every CPU has their own memory space and they are connected through a network.</li>
<li>Message Passing is used.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org2faa1d5">
<h2 id="org2faa1d5"><span class="section-number-2">15.</span> Terminology</h2>
<ul>
<li><b>Node</b>: A standalone &ldquo;computer in a box.&rdquo; Usually comprised of multiple CPUs/processors/cores, memory, network interfaces, etc. Nodes are networked together to comprise a supercomputer.</li>
<li><b>CPU</b>: Contemporary CPUs consist of one or more cores.</li>
<li><b>Process</b>: A process is an instance of a program that is being executed or processed.</li>
<li><b>Thread</b>: Thread is a segment of a process or a lightweight process that is managed by the scheduler independently.</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgfdeaf5f">
<h2 id="orgfdeaf5f"><span class="section-number-2">16.</span> What is OpenMP?</h2>
<ul>
<li>OpenMP stands for Open Multi-Processing.</li>
<li>Portable <i>shared memory</i> programming.</li>
<li>It is an API that is used for parallelizing codes.</li>
<li>Compatible with C/C++ and Fortran.</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgf59b50c">
<h2 id="orgf59b50c"><span class="section-number-2">17.</span> Why OpenMP?</h2>
<ul>
<li>Easy to learn: Pragma based syntaxes.</li>
<li>No need to changes the whole code (one line is enough to make your code parallel).</li>
<li>Compiler takes care of all the complexity behind the scene of running your code.</li>
<li>Support: Works with gcc compiler.</li>
<li>Extra functionalities can be added using Environment Variables and Runtime-library routines.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org382dff7">
<h2 id="org382dff7"><span class="section-number-2">18.</span> Hello World in C</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
    printf(<span style="color: #98be65;">"Hello, World\n"</span>);
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org3f3ecb4">
<h2 id="org3f3ecb4"><span class="section-number-2">19.</span> Compile and Run C</h2>
<div class="org-src-container">

<pre  class="src src-bash"   ><code trim><span style="color: #5B6268;">#</span><span style="color: #5B6268;">gcc --version
</span>gcc hello.c -o hello.out 
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim><span style="color: #5B6268;">#</span><span style="color: #5B6268;">gcc --version
</span>./hello.out
<span style="color: #5B6268;">#</span><span style="color: #5B6268;">sbatch script.sh hello.out</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org9258351">
<h2 id="org9258351"><span class="section-number-2">20.</span> Hello World in OpenMP</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp parallel
    {
        printf(<span style="color: #98be65;">"Hello, World\n"</span>);
    }
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgcae06f1">
<h2 id="orgcae06f1"><span class="section-number-2">21.</span> Compile and Run OpenMP</h2>
<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>gcc hello_omp.c -o hello_omp.out -fopenmp
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim><span style="color: #5B6268;">#</span><span style="color: #5B6268;">sbatch script.sh hello_omp.out
</span>./hello_omp.out
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org452dcfd">
<h2 id="org452dcfd"><span class="section-number-2">22.</span> Part 2</h2>

</section>
</section>
<section>
<section id="slide-orgcb42f2e">
<h2 id="orgcb42f2e"><span class="section-number-2">23.</span> Agenda</h2>
<ul>
<li>Understanding OpenMP code</li>
<li>Script for running OpenMP jobs</li>
<li>OpenMP directives</li>
<li>Thread creation</li>
<li>Environment Variables</li>
<li>OpenMP Runtime Routines</li>

</ul>
</section>
</section>
<section>
<section id="slide-orga52644a">
<h2 id="orga52644a"><span class="section-number-2">24.</span> Script for Running OpenMP Jobs</h2>
<ul>
<li>Create a file named <b>run.sh</b> in your code folder and paste below content in the file.</li>
<li>After that make the file executable.</li>

</ul>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim><span style="color: #5B6268;">#</span><span style="color: #5B6268;">!/bin/</span><span style="color: #51afef;">bash</span><span style="color: #5B6268;">
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH -N 1                                    # Nodes = 1
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --ntasks-per-node=40                    # Tasks on each node = 40 
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --job-name=omp                          # Specify job name
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --output=%J.out                         # Name of your output file (%J is replaced with job_id)
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --error=%J.err                          # Name of your error file
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --time=1-00:00:00                       # Specify time taken to run your script
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --partition=cpu                         # Specify partition (cpu, gpu, hm)
</span><span style="color: #5B6268;">#</span><span style="color: #5B6268;">SBATCH --reservation=hpcws.user
</span>
<span style="color: #c678dd;">ulimit</span> -s unlimited

./$<span style="color: #dcaeea;">1</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgbb67608">
<h2 id="orgbb67608"><span class="section-number-2">25.</span> Using script.sh script</h2>
<ul>
<li>Create a file called script.sh in your folder and paste the content inside the file.</li>
<li>Make the file executable using below command:</li>

</ul>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim><span style="color: #ECBE7B;">chmod</span> +x script.sh
</code></pre>
</div>

<ul>
<li>Now you can run your code using below command (run on the node directly):</li>

</ul>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>./script.sh a.out
</code></pre>
</div>

<ul>
<li>You can also use this if previous is not working (slurm scheduling):</li>

</ul>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim>sbatch script.sh a.out
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgcd36abc">
<h2 id="orgcd36abc"><span class="section-number-2">26.</span> Fork-Join Model&#xa0;&#xa0;&#xa0;<span class="tag"><span class="ATTACH">ATTACH</span></span></h2>

<div id="orgd5398cf" class="figure">
<p><img src="file:///home/abhi581b/org/.attach/81/049272-ddf6-4a78-9f94-30aff6892a5a/_20251109_212054fork_join.gif" alt="_20251109_212054fork_join.gif" />
</p>
</div>
</section>
<section id="slide-org80106da">
<h3 id="org80106da"><span class="section-number-3">26.1.</span> Parallel Region</h3>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel
{
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">this is the parallel region
</span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">anything written here will be executed by multiple threads
</span>}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org9647a08">
<h2 id="org9647a08"><span class="section-number-2">27.</span> OpenMP Constructs and Clause</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp [constructs] [clause]
{
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">this is the parallel region
</span>    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">anything written here will be executed by multiple cores
</span>}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgcaf8be5">
<h2 id="orgcaf8be5"><span class="section-number-2">28.</span> OpenMP Constructs</h2>
<p>
Constructs tell the compiler <b>where and how</b> to parallelize the code.
</p>
</section>
<section id="slide-org61db516">
<h3 id="org61db516"><span class="section-number-3">28.1.</span> Common constructs:</h3>
<ul>
<li>parallel</li>
<li>for</li>
<li>section</li>
<li>atomic</li>
<li>master</li>
<li>single</li>
<li>sections, etc.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org29c44ce">
<h2 id="org29c44ce"><span class="section-number-2">29.</span> OpenMP Clause</h2>
<p>
Clauses refine how the parallelism is implemented, control thread behavior, and specify how variables are shared among threads.
</p>
</section>
<section id="slide-org680bb7b">
<h3 id="org680bb7b"><span class="section-number-3">29.1.</span> Common clauses:</h3>
<ul>
<li>if</li>
<li>num_threads</li>
<li>reduction</li>
<li>private</li>
<li>shared</li>
<li>firstprivate</li>
<li>lastprivate, etc.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org8e6e358">
<h2 id="org8e6e358"><span class="section-number-2">30.</span> Assigning Number of Threads</h2>
<div class="outline-text-2" id="text-30">
</div>
</section>
<section id="slide-orge9c5bcd">
<h3 id="orge9c5bcd"><span class="section-number-3">30.1.</span> Using Environment Variables</h3>
<div class="org-src-container">

<pre  class="src src-bash"   ><code trim><span style="color: #c678dd;">export</span> <span style="color: #dcaeea;">OMP_NUM_THREADS</span>=4
</code></pre>
</div>
</section>
<section id="slide-org57541f9">
<h3 id="org57541f9"><span class="section-number-3">30.2.</span> Using OpenMP Clause</h3>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel num_threads(4)
</code></pre>
</div>
</section>
<section id="slide-org399d4fe">
<h3 id="org399d4fe"><span class="section-number-3">30.3.</span> Using Runtime Routine</h3>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim>omp_set_num_threads(7);
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgcb5d993">
<h2 id="orgcb5d993"><span class="section-number-2">31.</span> Assigning Number of Threads — Order of Precedence</h2>
<p>
Order of Precedence for assigning number of threads:
</p>

<ol>
<li>num_threads() clause</li>
<li>Routine calls (omp_set_num_threads)</li>
<li>Environment variables</li>

</ol>

<p>
If all are present → clause takes highest precedence.
</p>
</section>
</section>
<section>
<section id="slide-org0ac78f9">
<h2 id="org0ac78f9"><span class="section-number-2">32.</span> Assigning Number of Threads (Example)</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">omp_set_num_threads(2);
</span><span style="color: #51afef; font-weight: bold;">    #pragma</span> omp parallel 
    {
        <span style="color: #5B6268;">//</span><span style="color: #5B6268;">omp_get_thread_num();
</span>        printf(<span style="color: #98be65;">"Hello, World \n"</span> );
    }
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org5e3ea6d">
<h2 id="org5e3ea6d"><span class="section-number-2">33.</span> Runtime Library Routines</h2>
<ul>
<li>omp_set_num_threads(n);  
Set number of threads, n can be any natural number.</li>

<li>omp_get_num_threads();  
Returns total number of threads inside a parallel region.  
If called outside parallel region, returns 1.</li>

<li>omp_get_thread_num();  
Returns the id of a particular thread (unique id per thread).</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgaf16f78">
<h2 id="orgaf16f78"><span class="section-number-2">34.</span> Printing thread id of each thread (Example)</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">omp_set_num_threads(2);
</span><span style="color: #51afef; font-weight: bold;">    #pragma</span> omp parallel num_threads(7)
    {
        printf(<span style="color: #98be65;">"Hello, World from thread %d\n"</span>, omp_get_thread_num());
    }
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orge57e71b">
<h2 id="orge57e71b"><span class="section-number-2">35.</span> Part 3</h2>

</section>
</section>
<section>
<section id="slide-orgc909d83">
<h2 id="orgc909d83"><span class="section-number-2">36.</span> Agenda</h2>
<ul>
<li>OpenMP Memory Model</li>
<li>Data scoping</li>
<li>Work-sharing constructs</li>
<li>OpenMP for</li>
<li>OpenMP Error correction</li>

</ul>
</section>
</section>
<section>
<section id="slide-org01221ee">
<h2 id="org01221ee"><span class="section-number-2">37.</span> OpenMP Memory Model</h2>
<ul>
<li>OpenMP uses the <b>shared memory model</b>:</li>
<li>Most variables are <b>shared by default</b> among threads, unless specified otherwise.</li>

</ul>
</section>
</section>
<section>
<section id="slide-orged8b714">
<h2 id="orged8b714"><span class="section-number-2">38.</span> Data Scoping Clauses</h2>
<ul>
<li>shared</li>
<li>private</li>
<li>default</li>
<li>firstprivate</li>
<li>lastprivate</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgfe3e1ef">
<h2 id="orgfe3e1ef"><span class="section-number-2">39.</span> Printing thread id of each thread (Example)</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
    <span style="color: #5B6268;">//</span><span style="color: #5B6268;">omp_set_num_threads(2);
</span><span style="color: #51afef; font-weight: bold;">    #pragma</span> omp parallel num_threads(7)
    {
        <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">tid</span> = omp_get_thread_num();
        printf(<span style="color: #98be65;">"Hello, World from thread %d\n"</span>, tid);
    }
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orga511fce">
<h2 id="orga511fce"><span class="section-number-2">40.</span> Private</h2>
<ul>
<li>Private means every thread has its <b>own copy</b> of the variables.</li>
<li>Changes made inside parallel region are not visible to other threads.</li>
<li>Variables created inside a parallel region are private by default.</li>

</ul>

<p>
Syntax:
</p>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">x</span> = 10, <span style="color: #dcaeea;">y</span> = 20, <span style="color: #dcaeea;">z</span>;
<span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel private(x, y, z)
</code></pre>
</div>
<ul>
<li>Private clause can take multiple variables separated by commas.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org4730b68">
<h2 id="org4730b68"><span class="section-number-2">41.</span> Private Example</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">x</span> = 10;
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">y</span> = 20;
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp parallel private(x,y)
    {
        printf(<span style="color: #98be65;">"Thread %d: x = %d and y = %d\n"</span>, omp_get_thread_num(), x, y);
    }
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orge33b493">
<h2 id="orge33b493"><span class="section-number-2">42.</span> Shared</h2>
<ul>
<li>Shared means variables are accessible to all threads.</li>
<li>By default, most variables outside the parallel region are shared.</li>

</ul>

<p>
Syntax:
</p>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">x</span> = 10, <span style="color: #dcaeea;">y</span> = 20, <span style="color: #dcaeea;">z</span>;
<span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel shared(x, y, z)
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org26f6052">
<h2 id="org26f6052"><span class="section-number-2">43.</span> Shared Example</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">x</span> = 10;
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">y</span> = 20;
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp parallel shared(x,y)
    {
        printf(<span style="color: #98be65;">"Thread %d: x = %d and y = %d\n"</span>, omp_get_thread_num(), x, y);
    }
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org90a77d7">
<h2 id="org90a77d7"><span class="section-number-2">44.</span> Firstprivate</h2>
<ul>
<li>Similar to private</li>
<li>BUT copies initial values of variables from outside region to each thread’s private copy</li>

</ul>

<p>
Syntax:
</p>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">x</span> = 10, <span style="color: #dcaeea;">y</span> = 20, <span style="color: #dcaeea;">z</span>;
<span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel firstprivate(x, y, z)
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org16b521c">
<h2 id="org16b521c"><span class="section-number-2">45.</span> Firstprivate Example</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">x</span> = 10;
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">y</span> = 20;
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp parallel firstprivate(x,y)
    {
        printf(<span style="color: #98be65;">"Thread %d: x = %d and y = %d\n"</span>, omp_get_thread_num(), x, y);
    }
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgdf019bd">
<h2 id="orgdf019bd"><span class="section-number-2">46.</span> Benefits of Firstprivate Clause</h2>
<ul>
<li>Initialization: Ensures each thread starts with same initial values</li>
<li>Isolation: Each thread has its own copy</li>
<li>Independence: Changes do not affect others’ values</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgb9156a6">
<h2 id="orgb9156a6"><span class="section-number-2">47.</span> Default</h2>
<p>
Default clause specifies how variables are shared when not explicitly stated.
</p>

<p>
Values:
</p>
<ul>
<li>shared → default behavior</li>
<li>none → requires explicit specification for every variable</li>

</ul>

<p>
Syntax:
</p>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel <span style="color: #51afef;">default</span>(none)
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org0a49e0d">
<h2 id="org0a49e0d"><span class="section-number-2">48.</span> Default Example</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">x</span> = 10;
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">y</span> = 20;
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp parallel <span style="color: #51afef;">default</span>(none) shared(x) firstprivate(y)
    {
        printf(<span style="color: #98be65;">"Thread %d: x = %d and y = %d\n"</span>, omp_get_thread_num(), x, y);
    }
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org14c0c87">
<h2 id="org14c0c87"><span class="section-number-2">49.</span> Part 4</h2>

</section>
</section>
<section>
<section id="slide-orgd150560">
<h2 id="orgd150560"><span class="section-number-2">50.</span> Agenda</h2>
<ul>
<li>Work-sharing constructs</li>
<li>OpenMP for</li>
<li>Lastprivate clause</li>
<li>Creating data parallelly</li>
<li>Conditional Compilation</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgdb903f5">
<h2 id="orgdb903f5"><span class="section-number-2">51.</span> Work-sharing Constructs</h2>
<p>
Work-sharing constructs are used to distribute the workload among threads in a parallel region.
</p>
</section>
<section id="slide-org2354a9c">
<h3 id="org2354a9c"><span class="section-number-3">51.1.</span> They are used to divide the work of:</h3>
<ul>
<li>a loop</li>
<li>a section of code</li>
<li>or tasks among threads.</li>

</ul>
</section>
<section id="slide-orgaf3c0c8">
<h3 id="orgaf3c0c8"><span class="section-number-3">51.2.</span> Commonly used:</h3>
<ul>
<li>for</li>
<li>sections</li>
<li>single</li>
<li>task</li>

</ul>
</section>
</section>
<section>
<section id="slide-org97f2ea8">
<h2 id="org97f2ea8"><span class="section-number-2">52.</span> For Construct</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp parallel <span style="color: #51afef;">for</span>
    <span style="color: #51afef;">for</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span> = 0; i &lt; 5; i++){
        printf(<span style="color: #98be65;">"Hello, World\n"</span>);
    }
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org9727656">
<h2 id="org9727656"><span class="section-number-2">53.</span> Lastprivate</h2>
<p>
The lastprivate clause is used to preserve the value of a variable from the <b>last iteration</b>.
</p>
</section>
<section id="slide-org50687b3">
<h3 id="org50687b3"><span class="section-number-3">53.1.</span> Similar to private:</h3>
<ul>
<li>Values are private inside parallel region</li>
<li>BUT the final iteration&rsquo;s value gets copied back.</li>

</ul>
</section>
<section id="slide-org3ceaaf7">
<h3 id="org3ceaaf7"><span class="section-number-3">53.2.</span> Syntax:</h3>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel <span style="color: #51afef;">for</span> lastprivate(x, y, z)
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org084dedb">
<h2 id="org084dedb"><span class="section-number-2">54.</span> Lastprivate Example</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdlib.h&gt;</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">x</span> = 10;
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp parallel lastprivate(x,y)
    {
        x  = rand() % 100 + 1;
        printf(<span style="color: #98be65;">"Thread %d: x = %d\n"</span>, omp_get_thread_num(), x);
    }
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org95818cd">
<h2 id="org95818cd"><span class="section-number-2">55.</span> Creating Data Parallelly</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#define</span> <span style="color: #dcaeea;">N</span> 100
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">arr</span>[N];
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp parallel <span style="color: #51afef;">for</span> num_threads(10)
    <span style="color: #51afef;">for</span>(<span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span> = 0; i &lt; N; i++){
        arr[i] = i + 1;
    }
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgc16cfbf">
<h2 id="orgc16cfbf"><span class="section-number-2">56.</span> Conditional Compilation</h2>
<ul>
<li>Improves portability of your code.</li>
<li>Same code can be used as serial and parallel.</li>

<li>-fopenmp is used to enable openmp support.</li>

</ul>

<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#ifdef</span> _OPENMP
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#endif</span>

<span style="color: #51afef; font-weight: bold;">#ifdef</span> _OPENMP
    omp_set_num_threads(10);
<span style="color: #51afef; font-weight: bold;">#endif</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org7040b30">
<h2 id="org7040b30"><span class="section-number-2">57.</span> Conditional Compilation Example</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;stdio.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#ifdef</span> _OPENMP
<span style="color: #51afef; font-weight: bold;">#include</span><span style="color: #98be65;">&lt;omp.h&gt;</span>
<span style="color: #51afef; font-weight: bold;">#endif</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span>(){
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">tid</span> = 0;
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">totalThread</span> = 0;
<span style="color: #51afef; font-weight: bold;">#ifdef</span> _OPENMP
    omp_set_num_threads(10);
<span style="color: #51afef; font-weight: bold;">#endif</span>
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp parallel
    {
<span style="color: #51afef; font-weight: bold;">#ifdef</span> _OPENMP
        tid = omp_get_thread_num();
        totalThread = omp_get_num_threads();
<span style="color: #51afef; font-weight: bold;">#endif</span>
        printf(<span style="color: #98be65;">"Hello from thread %d of %d\n"</span>, tid, totalThread);
    }
    <span style="color: #51afef;">return</span> 0;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org50a879b">
<h2 id="org50a879b"><span class="section-number-2">58.</span> Part 5</h2>

</section>
</section>
<section>
<section id="slide-orga7e2c91">
<h2 id="orga7e2c91"><span class="section-number-2">59.</span> Agenda</h2>
<ul>
<li>OpenMP Scheduling</li>
<li>Static, Dynamic, Guided, Runtime</li>

</ul>
</section>
</section>
<section>
<section id="slide-org0c61624">
<h2 id="org0c61624"><span class="section-number-2">60.</span> OpenMP Scheduling</h2>
<p>
Scheduling manages how iterations of a loop are distributed among threads.
</p>
</section>
<section id="slide-orgd659732">
<h3 id="orgd659732"><span class="section-number-3">60.1.</span> Goal:</h3>
<ul>
<li>Balance the workload across threads</li>
<li>Minimize idle time</li>
<li>Ensure efficient execution</li>

</ul>
</section>
<section id="slide-orgab28dfc">
<h3 id="orgab28dfc"><span class="section-number-3">60.2.</span> Types:</h3>
<ul>
<li>static</li>
<li>dynamic</li>
<li>guided</li>
<li>auto</li>
<li>runtime</li>

</ul>
</section>
<section id="slide-org70961f2">
<h3 id="org70961f2"><span class="section-number-3">60.3.</span> Syntax:</h3>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel <span style="color: #51afef;">for</span> schedule(kind, chunksize)
</code></pre>
</div>
</section>
<section id="slide-orgcf6bdb8">
<h3 id="orgcf6bdb8"><span class="section-number-3">60.4.</span> Using environment variable:</h3>
<div class="org-src-container">

<pre  class="src src-bash"   ><code trim><span style="color: #c678dd;">export</span> <span style="color: #dcaeea;">OMP_SCHEDULE</span>=<span style="color: #98be65;">"KIND, CHUNKSIZE"</span>
</code></pre>
</div>
</section>
<section id="slide-org15e568a">
<h3 id="org15e568a"><span class="section-number-3">60.5.</span> Kind values:</h3>
<ul>
<li>static, dynamic, guided, auto, runtime</li>

</ul>
</section>
<section id="slide-org4b04797">
<h3 id="org4b04797"><span class="section-number-3">60.6.</span> Chunksize values:</h3>
<ul>
<li>1, 2, 3, …, N</li>

</ul>
</section>
</section>
<section>
<section id="slide-org619c24d">
<h2 id="org619c24d"><span class="section-number-2">61.</span> Static Scheduling</h2>
<ul>
<li>Iterations are pre-assigned to threads in contiguous chunks before loop starts.</li>
<li>Default scheduling mode.</li>
<li>Low overhead and predictable execution.</li>
<li>Can lead to load imbalance if iterations have varying execution times.</li>

</ul>
</section>
<section id="slide-org540a82b">
<h3 id="org540a82b"><span class="section-number-3">61.1.</span> Syntax:</h3>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel <span style="color: #51afef;">for</span> schedule(<span style="color: #51afef;">static</span>, chunksize)
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgd7eba7c">
<h2 id="orgd7eba7c"><span class="section-number-2">62.</span> Dynamic Scheduling</h2>
<ul>
<li>Iterations assigned to threads <b>during execution</b>.</li>
<li>Higher runtime overhead.</li>
<li>Better for uneven workloads.</li>
<li>Good load balancing.</li>

</ul>
</section>
<section id="slide-orgd4d4e29">
<h3 id="orgd4d4e29"><span class="section-number-3">62.1.</span> Syntax:</h3>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel <span style="color: #51afef;">for</span> schedule(dynamic, chunksize)
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgb7722b2">
<h2 id="orgb7722b2"><span class="section-number-2">63.</span> Guided Scheduling</h2>
<ul>
<li>Similar to dynamic but chunk size decreases exponentially.</li>
<li>Good load balancing with reduced overhead.</li>
<li>n specifies smallest chunk size (default is 1).</li>

</ul>
</section>
<section id="slide-org310fd29">
<h3 id="org310fd29"><span class="section-number-3">63.1.</span> Syntax:</h3>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel <span style="color: #51afef;">for</span> schedule(guided, n)
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org837a801">
<h2 id="org837a801"><span class="section-number-2">64.</span> Runtime Scheduling</h2>
<ul>
<li>Allows changing schedule type <b>without recompiling</b>.</li>

<li>Compile code once using schedule(runtime)</li>

</ul>

<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel <span style="color: #51afef;">for</span> schedule(runtime)
</code></pre>
</div>

<ul>
<li>Then set schedule externally:</li>

</ul>

<div class="org-src-container">

<pre  class="src src-bash"   ><code trim><span style="color: #c678dd;">export</span> <span style="color: #dcaeea;">OMP_SCHEDULE</span>=<span style="color: #98be65;">"static,3"</span>
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org67715a9">
<h2 id="org67715a9"><span class="section-number-2">65.</span> Part 6</h2>

</section>
</section>
<section>
<section id="slide-org26afae9">
<h2 id="org26afae9"><span class="section-number-2">66.</span> Agenda</h2>
<ul>
<li>Runtime Routines for scheduling</li>
<li>Assigning work to a particular thread</li>
<li>OpenMP Barrier</li>
<li>OpenMP Single</li>
<li>OpenMP Master</li>
<li>OpenMP Critical</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgc19d0e6">
<h2 id="orgc19d0e6"><span class="section-number-2">67.</span> Runtime Routines for Scheduling</h2>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #c678dd;">omp_set_schedule</span>(kind, chunksize)
</code></pre>
</div>
</section>
<section id="slide-org44de32e">
<h3 id="org44de32e"><span class="section-number-3">67.1.</span> Example:</h3>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #ECBE7B;">omp_sched_t</span> <span style="color: #dcaeea;">kind</span> = omp_sched_static;
<span style="color: #c678dd;">omp_set_schedule</span>(kind, 2);
</code></pre>
</div>
</section>
<section id="slide-orgcd4f9f7">
<h3 id="orgcd4f9f7"><span class="section-number-3">67.2.</span> Other types:</h3>
<ul>
<li>omp_sched_dynamic</li>
<li>omp_sched_guided</li>
<li>omp_sched_auto</li>

</ul>
</section>
</section>
<section>
<section id="slide-org8f54597">
<h2 id="org8f54597"><span class="section-number-2">68.</span> OpenMP Barrier</h2>
<ul>
<li>All threads wait at this point until all threads reach it.</li>

<li>Syntax:</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp barrier
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org5c02870">
<h2 id="org5c02870"><span class="section-number-2">69.</span> OpenMP Single</h2>
<ul>
<li>Only <b>one thread</b> executes this block.</li>

<li>Syntax:</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp single
{
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">code here
</span>}
</code></pre>
</div>

<ul>
<li>(Implicit barrier unless “nowait” is used)</li>

</ul>
</section>
</section>
<section>
<section id="slide-org16694dd">
<h2 id="org16694dd"><span class="section-number-2">70.</span> OpenMP Master</h2>
<ul>
<li>Only <b>master thread (thread 0)</b> executes this block.</li>
<li>No implicit barrier after master block.</li>

<li>Syntax:</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp master
{
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">code here
</span>}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgf3ccf6e">
<h2 id="orgf3ccf6e"><span class="section-number-2">71.</span> OpenMP Critical</h2>
<ul>
<li>Ensures <b>only one thread</b> enters the block at a time.</li>
<li>Prevents race conditions.</li>

<li>Syntax:</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp critical
{
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">code here
</span>}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orga7889d5">
<h2 id="orga7889d5"><span class="section-number-2">72.</span> Part 7</h2>

</section>
</section>
<section>
<section id="slide-orgfe02cd2">
<h2 id="orgfe02cd2"><span class="section-number-2">73.</span> Agenda</h2>
<ul>
<li>Synchronization in OpenMP</li>
<li>OpenMP Critical</li>
<li>OpenMP Atomic</li>
<li>Sum Program</li>
<li>Practice Q/A</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgea37ecf">
<h2 id="orgea37ecf"><span class="section-number-2">74.</span> Synchronization</h2>
<ul>
<li>Threads share resources and memory.</li>
<li>Without synchronization → race conditions and incorrect results.</li>

</ul>
</section>
<section id="slide-orgc31212c">
<h3 id="orgc31212c"><span class="section-number-3">74.1.</span> Common synchronization constructs:</h3>
<ul>
<li>critical</li>
<li>barrier</li>
<li>atomic</li>

</ul>
</section>
</section>
<section>
<section id="slide-org414155f">
<h2 id="org414155f"><span class="section-number-2">75.</span> OpenMP Critical (again)</h2>
<p>
Protects shared variables from concurrent updates.
</p>

<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp critical
{
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">code here
</span>}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgebea727">
<h2 id="orgebea727"><span class="section-number-2">76.</span> Reduction</h2>
<ul>
<li>Allows safe parallel accumulation.</li>

<li>Syntax:</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel <span style="color: #51afef;">for</span> reduction(operator: variable)
</code></pre>
</div>

<ul>
<li>Example:</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">sum</span> = 0;
<span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel <span style="color: #51afef;">for</span> reduction(+: sum)
<span style="color: #51afef;">for</span> (<span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span> = 0; i &lt; 10000; i++) {
    sum += i;
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org116ad0f">
<h2 id="org116ad0f"><span class="section-number-2">77.</span> Measuring Time</h2>
<p>
Use `omp_get_wtime()`:
</p>

<div class="org-src-container">

<pre  class="src src-C"   ><code trim>start_time = omp_get_wtime();

<span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel <span style="color: #51afef;">for</span> reduction(+:sum)
<span style="color: #51afef;">for</span> (<span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span> = 0; i &lt; 1000000; i++) {
    sum += i;
}

end_time = omp_get_wtime();
printf(<span style="color: #98be65;">"Execution Time: %f seconds\n"</span>, end_time - start_time);
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org0016e89">
<h2 id="org0016e89"><span class="section-number-2">78.</span> Part 8</h2>

</section>
</section>
<section>
<section id="slide-org36b6591">
<h2 id="org36b6591"><span class="section-number-2">79.</span> Agenda</h2>
<ul>
<li>Reduction</li>
<li>OpenMP Atomic</li>
<li>Sum Program Practice</li>

</ul>
</section>
</section>
<section>
<section id="slide-org8e87424">
<h2 id="org8e87424"><span class="section-number-2">80.</span> Atomic</h2>
<ul>
<li>Ensures a specific update is performed indivisibly.</li>

<li>Syntax:</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp atomic
sum += arr[i];
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgb614b12">
<h2 id="orgb614b12"><span class="section-number-2">81.</span> Problem</h2>
<p>
Create a program to perform sum of thread ids of every thread.
</p>
</section>
</section>
<section>
<section id="slide-org9a89f05">
<h2 id="org9a89f05"><span class="section-number-2">82.</span> Assignment</h2>
<p>
Create a parallel matrix multiplication program.
</p>
<ul>
<li>Assign your data with 1.</li>
<li>Create serial and parallel version in the same code.</li>
<li>Measure computation time.</li>

</ul>
</section>
</section>
<section>
<section id="slide-org3b17ca2">
<h2 id="org3b17ca2"><span class="section-number-2">83.</span> Part 9</h2>

</section>
</section>
<section>
<section id="slide-org31832e4">
<h2 id="org31832e4"><span class="section-number-2">84.</span> Agenda</h2>
<ul>
<li>Sections</li>
<li>Nowait</li>
<li>Sum of two array</li>
<li>Prime number calculator</li>
<li>PI calculator</li>

</ul>
</section>
</section>
<section>
<section id="slide-org0d32a5b">
<h2 id="org0d32a5b"><span class="section-number-2">85.</span> Sections</h2>
<ul>
<li>Used to divide work into independent tasks.</li>

<li>Syntax:</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel sections
{
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp section
    {
        <span style="color: #5B6268;">//</span><span style="color: #5B6268;">task 1
</span>    }
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp section
    {
        <span style="color: #5B6268;">//</span><span style="color: #5B6268;">task 2
</span>    }
}
</code></pre>
</div>

<ul>
<li>Implicit barrier at end unless “nowait” is used.</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgb1f2c2e">
<h2 id="orgb1f2c2e"><span class="section-number-2">86.</span> Nowait</h2>
<ul>
<li>Removes implicit barrier.</li>

<li>Syntax:</li>

</ul>
<div class="org-src-container">

<pre  class="src src-C"   ><code trim><span style="color: #51afef; font-weight: bold;">#pragma</span> omp parallel sections nowait
{
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp section
    {
        <span style="color: #5B6268;">//</span><span style="color: #5B6268;">task 1
</span>    }
<span style="color: #51afef; font-weight: bold;">    #pragma</span> omp section
    {
        <span style="color: #5B6268;">//</span><span style="color: #5B6268;">task 2
</span>    }
}
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org3a8d568">
<h2 id="org3a8d568"><span class="section-number-2">87.</span> Assignment</h2>
<ul>
<li>Create a parallel matrix multiplication program.</li>
<li>Assign your data with 1.</li>
<li>Create serial and parallel version in same code.</li>
<li>Measure computation time.</li>

</ul>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
 { src: 'https://cdn.jsdelivr.net/npm/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }]

});

</script>
</body>
</html>
